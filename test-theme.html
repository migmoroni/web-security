<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste de Tema - Web Security</title>
    <style>
        /* Cópia das variáveis CSS para teste */
        :root {
            --safe-color: #dcfce7;
            --suspicious-color: #fef3c7;
            --dangerous-color: #fee2e2;
            --animation-duration: 0.3s;
            --font-scale: 1;
            
            /* Tema claro */
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --text-primary: #1f2937;
            --text-secondary: #6b7280;
            --border-color: #e5e7eb;
            --accent-color: #3b82f6;
        }

        .dark-theme {
            --bg-primary: #1f2937;
            --bg-secondary: #111827;
            --text-primary: #f9fafb;
            --text-secondary: #d1d5db;
            --border-color: #374151;
            --accent-color: #60a5fa;
            
            --safe-color: #065f46;
            --suspicious-color: #92400e;
            --dangerous-color: #7f1d1d;
        }

        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            font-family: system-ui, sans-serif;
            margin: 0;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .container {
            max-width: 400px;
            margin: 0 auto;
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
        }

        .theme-info {
            background-color: var(--bg-primary);
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
        }

        .indicator {
            display: inline-block;
            padding: 5px 10px;
            margin: 5px;
            border-radius: 4px;
        }

        .safe { background-color: var(--safe-color); }
        .suspicious { background-color: var(--suspicious-color); }
        .dangerous { background-color: var(--dangerous-color); }

        button {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s ease;
        }

        button:hover {
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Teste de Tema - Web Security</h1>
        
        <div class="theme-info">
            <p><strong>Tema do Sistema:</strong> <span id="system-theme"></span></p>
            <p><strong>Tema Aplicado:</strong> <span id="applied-theme"></span></p>
        </div>

        <div>
            <h3>Indicadores Visuais:</h3>
            <div class="indicator safe">Link Seguro</div>
            <div class="indicator suspicious">Link Suspeito</div>
            <div class="indicator dangerous">Link Perigoso</div>
        </div>

        <div style="margin-top: 20px;">
            <button onclick="applyTheme('light')">Tema Claro</button>
            <button onclick="applyTheme('dark')">Tema Escuro</button>
            <button onclick="applyTheme('auto')">Auto (Sistema)</button>
        </div>

        <div style="margin-top: 20px;">
            <button onclick="testSystemDetection()">Testar Detecção Sistema</button>
            <button onclick="logThemeInfo()">Ver Info Tema</button>
        </div>
    </div>

    <script>
        function updateThemeInfo() {
            const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const isDarkApplied = document.documentElement.classList.contains('dark-theme');
            
            document.getElementById('system-theme').textContent = systemPrefersDark ? 'Escuro' : 'Claro';
            document.getElementById('applied-theme').textContent = isDarkApplied ? 'Escuro' : 'Claro';
        }

        function applyTheme(theme) {
            const root = document.documentElement;
            const body = document.body;
            
            // Limpar classes anteriores
            root.classList.remove('dark-theme', 'light-theme');
            body.classList.remove('dark-theme', 'light-theme');
            
            let isDark = false;
            if (theme === 'dark') {
                isDark = true;
            } else if (theme === 'light') {
                isDark = false;
            } else {
                // auto
                isDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            }
            
            if (isDark) {
                root.classList.add('dark-theme');
                body.classList.add('dark-theme');
            } else {
                root.classList.add('light-theme');
                body.classList.add('light-theme');
            }
            
            updateThemeInfo();
        }

        function testSystemDetection() {
            console.log('Sistema prefere escuro:', window.matchMedia('(prefers-color-scheme: dark)').matches);
            console.log('Classes no root:', document.documentElement.classList.toString());
            console.log('Cor de fundo atual:', getComputedStyle(document.body).backgroundColor);
        }

        function logThemeInfo() {
            const root = document.documentElement;
            console.log('CSS Variables:');
            console.log('--bg-primary:', getComputedStyle(root).getPropertyValue('--bg-primary'));
            console.log('--text-primary:', getComputedStyle(root).getPropertyValue('--text-primary'));
            console.log('--safe-color:', getComputedStyle(root).getPropertyValue('--safe-color'));
        }

        // Inicializar
        window.addEventListener('load', () => {
            // Detectar tema do sistema automaticamente
            applyTheme('auto');
            
            // Escutar mudanças
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {
                applyTheme('auto');
            });
        });
    </script>
</body>
</html>
